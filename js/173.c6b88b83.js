"use strict";(self["webpackChunkzhizhi_cms"]=self["webpackChunkzhizhi_cms"]||[]).push([[173],{5580:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var t=a(3498),d=(a(1844),a(2790)),o=(a(7176),a(9007),a(1514)),u=(a(2064),a(8179)),i=(a(6809),a(7113),a(7282)),n=(a(172),a(6699),a(3396)),m=a(4870),s=a(7139),c=a(2846);const r=(0,n.Uk)("查询"),w={m:"4"},p=(0,n.Uk)("删除回答"),f=(0,n.Uk)("修改问题"),v={class:"dialog-footer"},_=(0,n.Uk)("取消"),W=(0,n.Uk)("确定");var h=(0,n.aZ)({__name:"editAnswer",setup(e){const l=(0,m.qj)({tableData:[],form:{},selectData:{}});let{tableData:a,form:h,selectData:U}=(0,m.BK)(l);const b=(0,m.iH)(!1),k="140px",V=(0,m.iH)(""),S=(0,n.Fl)((()=>function(e){return e.filter((e=>(e.nickName=e.nickName||"",!V.value||e.nickName.toLowerCase().includes(V.value.toLowerCase()))))})),g=()=>{(0,c.tI)().then((e=>{a.value=e.data})).catch((e=>{console.log(e)}))};g();const y=(e,l)=>{(0,c.Tc)(e.answer_id).then((()=>{a.value.forEach((a=>{a.question_id===e.question_id&&a.answers.splice(l,1)}))})).catch((e=>{console.log("err",e)}))},C=e=>{b.value=!0,h.value=a.value[e]},z=()=>{b.value=!1,(0,c.WW)(h.value).then((e=>{console.log(e)})).catch((e=>{console.log("err",e)}))},D=()=>{V.value=""};(0,n.bv)((()=>{setTimeout((()=>{const e=document.querySelector(".el-table__body")?.getElementsByTagName("i");for(let l=0;l<a.value.length;l++)e[l].addEventListener("click",D)}),100)}));const q=()=>{let e=a.value;U.value.title||U.value.desc?(U.value.title&&(e=e.filter((e=>-1!==e.title.indexOf(U.value.title)))),U.value.desc&&(e=e.filter((e=>-1!==e.desc.indexOf(U.value.desc))))):g(),a.value=e};return(0,n.YP)([()=>U.value.title,()=>U.value.desc],(()=>{""!=U.value.title&&U.value.title||""!=U.value.desc&&U.value.desc||g()})),(e,l)=>{const c=i.EZ,g=o.nH,D=u.mi,x=o.ly,I=d.$Y,N=d.eI,E=t.d0;return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(x,{inline:!0,model:(0,m.SU)(U),class:"demo-form-inline"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{label:"问题"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:(0,m.SU)(U).title,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.SU)(U).title=e),placeholder:"请输入关键字"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(g,{label:"问题描述"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:(0,m.SU)(U).desc,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.SU)(U).desc=e),placeholder:"请输入关键字"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(D,{type:"primary",onClick:q},{default:(0,n.w5)((()=>[r])),_:1})])),_:1})])),_:1},8,["model"]),(0,n.Wm)(N,{data:(0,m.SU)(a),border:"",style:{width:"100%","margin-top":"20px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{type:"expand"},{default:(0,n.w5)((e=>[(0,n._)("div",w,[(0,n.Wm)(N,{data:(0,m.SU)(S)(e.row.answers)},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{label:"回答","show-overflow-tooltip":""},{default:(0,n.w5)((e=>[(0,n._)("div",null,(0,s.zw)(e.row.answer),1)])),_:1}),(0,n.Wm)(I,{label:"回答ID",prop:"answer_id",width:"130"}),(0,n.Wm)(I,{label:"回答用户",prop:"nickName",width:"100"}),(0,n.Wm)(I,{label:"点赞数",prop:"likes",width:"80"}),(0,n.Wm)(I,{align:"center"},{header:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e),size:"small",placeholder:"输入用户名搜索回答"},null,8,["modelValue"])])),default:(0,n.w5)((e=>[(0,n.Wm)(D,{size:"small",type:"danger",onClick:l=>y(e.row,e.$index)},{default:(0,n.w5)((()=>[p])),_:2},1032,["onClick"])])),_:1})])),_:2},1032,["data"])])])),_:1}),(0,n.Wm)(I,{prop:"title",label:"问题",width:"250"}),(0,n.Wm)(I,{prop:"question_id",label:"问题ID",width:"180"}),(0,n.Wm)(I,{prop:"desc",label:"问题描述","show-overflow-tooltip":""}),(0,n.Wm)(I,{label:"操作",width:"180"},{default:(0,n.w5)((e=>[(0,n.Wm)(D,{size:"small",type:"danger",onClick:l=>C(e.$index)},{default:(0,n.w5)((()=>[f])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,n.Wm)(E,{modelValue:b.value,"onUpdate:modelValue":l[7]||(l[7]=e=>b.value=e),title:"修改问题"},{footer:(0,n.w5)((()=>[(0,n._)("span",v,[(0,n.Wm)(D,{onClick:l[6]||(l[6]=e=>b.value=!1)},{default:(0,n.w5)((()=>[_])),_:1}),(0,n.Wm)(D,{type:"primary",onClick:z},{default:(0,n.w5)((()=>[W])),_:1})])])),default:(0,n.w5)((()=>[(0,n.Wm)(x,{model:(0,m.SU)(h)},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{label:"问题ID：","label-width":k},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:(0,m.SU)(h).question_id,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.SU)(h).question_id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(g,{label:"问题："},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:(0,m.SU)(h).title,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.SU)(h).title=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(g,{label:"问题描述："},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:(0,m.SU)(h).desc,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.SU)(h).desc=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}});const U=h;var b=U}}]);
//# sourceMappingURL=173.c6b88b83.js.map